trajectory_finalization
=======================

.. py:module:: trajectory_finalization


Attributes
----------

.. autoapisummary::

   trajectory_finalization.NodeType
   trajectory_finalization.DataType


Functions
---------

.. autoapisummary::

   trajectory_finalization.finalize_loaded_trajectory
   trajectory_finalization.set_state_defaults
   trajectory_finalization.normalize_dataset


Module Contents
---------------

.. py:data:: NodeType

.. py:data:: DataType

.. py:function:: finalize_loaded_trajectory(dataset: shnitsel.data.tree.TreeNode[Any, DataType], loading_parameters: shnitsel.io.shared.helpers.LoadingParameters | None) -> shnitsel.data.tree.TreeNode[Any, DataType]
                 finalize_loaded_trajectory(dataset: DataType, loading_parameters: shnitsel.io.shared.helpers.LoadingParameters | None) -> DataType
                 finalize_loaded_trajectory(dataset: None, loading_parameters: shnitsel.io.shared.helpers.LoadingParameters | None) -> None

   Function to apply some final postprocessing common to all input routines that allow reading of single trajectories from input formats.

   :param dataset: The dataset to perform finalization on. Only updates Dataset, Trajectory and Frames data.
                   All other data will be returned unchanged
   :type dataset: xr.Dataset | Trajectory | Frames | NodeType | None
   :param loading_parameters: Parameters to set some defaults.
   :type loading_parameters: LoadingParameters | None

   :returns: The same type as the original `dataset` parameter but potentially with some
             default values and conversions applied.
   :rtype: xr.Dataset | Trajectory | Frames | NodeType | None


.. py:function:: set_state_defaults(dataset, loading_parameters)

   Helper function to apply default settings to dataset variables
   for state names and state types if they have not been assigned at some point
   earlier during the configuration process.

   :param dataset: The dataset to set state name and state type information on.
   :type dataset: xr.Dataset
   :param loading_parameters: Currently unused settings to be applied to trajectory import.
   :type loading_parameters: LoadingParameters | None

   :returns: The dataset but with default values for state types and state names
   :rtype: xr.Dataset


.. py:function:: normalize_dataset(ds)

   Helper method to perform some standardized renaming operations as well as some
   restructuring, e.g. if a multi-index is missing.

   May also convert some legacy attributes to promoted dimensionless variables.

   :param ds: Dataset to normalize according to current Shnitsel standards
   :type ds: xr.Dataset

   :returns: The renamed dataset.
   :rtype: xr.Dataset


